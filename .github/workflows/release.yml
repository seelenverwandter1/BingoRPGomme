name: use this
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - name: pull latest and remove old file from repo
      run: |
        git config --global user.name "1Timo1"
    - name: Install zip
      uses: montudor/action-zip@v1
      
#Light
    - name: Zip output LightRP
      run: zip -r release/BingoRPGommeLight.zip pack.png pack.mcmeta README.md assets -x assets/minecraft/textures/gui\*
      working-directory: .
    - name: push changes to remote
      run: |
        git add -A
        git commit -m "new pack"
        git push --force
  
    - uses: actions/upload-artifact@v3
      with:
        name: BingoRPGommeLight.zip
        path: release/BingoRPGommeLight.zip
        
  #Dark
    - name: Zip output DarkRP
      run: zip -r release/BingoRPGommeDark.zip pack.png pack.mcmeta README.md assets
      working-directory: .
    - name: push changes to remote
      run: |
        git add -A
        git commit -m "new pack"
        git push --force
        
    - uses: actions/upload-artifact@v3
      with:
        name: BingoRPGommeDark.zip
        path: release/BingoRPGommeDark.zip
        
    - name: Discord Webhook Notify
      # You may pin to the exact commit or the version.
      # uses: rjstone/discord-webhook-notify@89b0bf43c2c8514f70d0dcba4a706b904e8a3112
      uses: rjstone/discord-webhook-notify@v1.0.4
      with:
        # Discord webhook URL. Should be stored in a secret and inserted as a context expression.
        webhookUrl: ${{ secrets.WEBHOOKURL }}
        # Severity level - info, warn, or error
        severity: info
        # Embed notification message. Use context expressions and environment variables to provide information. Default provides branch and user info.
        description: Update!?! https://github.com/1Timo1/BingoRPGomme/tree/main/release
        # Additional text after the notification message in case you want to retain the default message.
  #      details: # optional
        # Footer for the embed. Defaults to severity.
   #    footer: # optional
        # Text to be sent as normal text above the embed. Use context expressions and environment variables to provide information.
        text: Bla
        # Username to display in discord.
        username: Seelenverwandter
        # Notification color in the form poundsign rrggbb (hex). Default determined by severity.
        color: ff0000
        # URL to png of discord avatar to use. Default is the GitHub monochrome mark cat logo.
        avatarUrl: https://cdn.discordapp.com/attachments/1056264822259458118/1056272281908826192/Komp_1.gif
