name: use this
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - name: pull latest and remove old file from repo
      run: |
        git config --global user.name "1Timo1"
    - name: Install zip
      uses: montudor/action-zip@v1
      
#Light
    - name: Zip output LightRP
      run: zip -r release/BingoRPGommeLight.zip pack.png pack.mcmeta README.md assets -x assets/minecraft/textures/gui\*
      working-directory: .
    - name: push changes to remote
      run: |
        git add -A
        git commit -m "new pack"
        git push --force
  
    - uses: actions/upload-artifact@v3
      with:
        name: BingoRPGommeLight.zip
        path: release/BingoRPGommeLight.zip
        
  #Dark
    - name: Zip output DarkRP
      run: zip -r release/BingoRPGommeDark.zip pack.png pack.mcmeta README.md assets
      working-directory: .
    - name: push changes to remote
      run: |
        git add -A
        git commit -m "new pack"
        git push --force
        
    - uses: actions/upload-artifact@v3
      with:
        name: BingoRPGommeDark.zip
        path: release/BingoRPGommeDark.zip
        
    - name: discord-webhook
      # You may pin to the exact commit or the version.
      # uses: johnnyhuy/actions-discord-git-webhook@ba54912b26910da886c9095317d6da6182a87224
      uses: johnnyhuy/actions-discord-git-webhook@v1.0.0
      with:
        # Discord Webhook ID (ignored if `webhook_url` is set)
        id: ${{ secrets.DCID }}
        # Discord Webhook token (ignored if `webhook_url` is set)
        token: ${{ secrets.DCToken }}
